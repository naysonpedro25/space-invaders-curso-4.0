import{h as L}from"./kaplay-bxqp4ndF.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}})();const F=600,T=20,M=950,P=70,v={CIMA:-1,BAIXO:1},f={FACIL:1,MEDIO:.6,DIFICIL:.3},C=15;function x(e,i){const n=o.add([o.rect(2,25),o.color("#FFFFFF"),o.anchor("center"),o.pos(e),o.area(),o.timer(),"projetil"]);return n.onUpdate(()=>{n.move(o.vec2(0,i*M)),(n.pos.x<0||n.pos.y>o.height())&&n.destroy()}),n}function I(){const e=o.add([o.sprite("nave",{width:90}),o.rotate(),o.pos(o.center().x,o.center().y+370),o.anchor("center"),o.timer(),o.area({shape:new o.Rect(o.vec2(0,0),50,55)}),"jogador"]);e.add([o.sprite("motor",{width:80}),o.pos(0,10),o.anchor("center")]).add([o.sprite("motor-ligado",{width:80,anim:"run"}),o.anchor("center"),o.pos(0,5)]);function n(){e.onKeyDown(r=>{r==="left"&&(e.angle=o.lerp(e.angle,-20,.1),e.pos.x>e.width/2&&e.move(o.vec2(-600,0))),r==="right"&&(e.angle=o.lerp(e.angle,T,.1),e.pos.x<o.width()-e.width/2&&e.move(o.vec2(F,0)))}),e.onKeyPress(r=>{r==="up"&&(o.play("projetil",{volume:.3}),x(o.vec2(e.pos.x,e.pos.y-e.height/2+5),v.CIMA).tag("projetil-jogador"))}),e.onUpdate(()=>{e.angle=o.lerp(e.angle,0,.09)})}return{jogador:e,configuracaoJogador:n}}function w(e){return o.add([o.sprite("inimigo",{width:40,anim:"run"}),o.anchor("center"),o.pos(e),o.timer(),o.area(),"inimigo"])}function m(){const e=Math.round(o.rand(8)+1),i=Math.round(o.rand(8)+1);for(let n=0;n<e;n++)for(let r=0;r<i;r++){const t=30+r*50,a=100+n*50;w(o.vec2(t,a))}}function A(){o.get("inimigo").forEach(e=>{e.exists()&&e.destroy()})}function q(e){let i=!0;o.onUpdate(()=>{const r=o.get("inimigo");if(r.length===0){A();return}let t=0,a=o.width();const c=r[0].width;r.forEach(s=>{s.exists()&&(a=Math.min(s.pos.x,a),t=Math.max(s.pos.x,t))}),a<c/2&&(i=!0),t>o.width()-c/2&&(i=!1),r.forEach(s=>{s.exists()&&(i?s.move(o.vec2(P,0)):s.move(o.vec2(-70,0)))})});async function n(){if(!(o.get("jogador").length>0))return;const t=o.get("inimigo").filter(O=>O.exists());if(t.length===0)return;const a=Math.floor(o.rand(0,t.length)),c=t[a];if(!c)return;x(o.vec2(c.pos.x,c.pos.y+c.height/2),v.BAIXO).tag("projetil-inimigo")}o.loop(e,()=>{n()})}function J(e,i){return o.add([o.circle(3),o.pos(e),o.move(o.vec2(Math.random()-.5,Math.random()-.5),100),o.opacity(1),o.animate(),o.color(i),"particula"])}function y(e,i){for(let n=0;n<C;n++){const r=J(e.pos,i);r.onUpdate(()=>{r.opacity-=.03,r.opacity<=0&&r.destroy()})}return o.get("particula")}const b=document.querySelectorAll(".botao-play"),N=document.querySelector(".botao-resetar"),R=document.querySelector(".tela-inicio"),j=document.querySelector("canvas"),p=document.querySelector(".dificuldade"),S=document.querySelector(".nivel");let u=1;const D=document.querySelector(".pontos"),E=document.querySelector(".maiorPontuacao");let d=0,l=Number(localStorage.getItem("maiorPontuacao"))||0;console.log(l);E.innerText=l;const h=document.querySelector(".fim-jogo");h.remove();N.addEventListener("click",()=>{G()});let o,g=f.MEDIO;function U(){b.forEach(e=>{p.innerText="Médio",e.addEventListener("click",()=>{e.classList.contains("facil")&&(g=f.FACIL,p.innerText="Fácil"),e.classList.contains("dificil")&&(g=f.DIFICIL,p.innerText="Difícil"),o=L({background:"#121212",canvas:document.querySelector("canvas")}),o.loadRoot("./"),o.loadSound("projetil","/sounds/shoot.mp3"),o.loadSound("acerto","/sounds/hit.mp3"),o.loadSound("explosao","/sounds/explosion.mp3"),o.loadSound("proximo-nivel","/sounds/next_level.mp3"),o.loadSprite("nave","/sprites/spaceship.png"),o.loadSprite("motor","/sprites/engine.png"),o.loadSprite("inimigo","/sprites/invader-sprites.png",{sliceX:2,anims:{run:{from:0,to:1,loop:!0,speed:5}}}),o.loadSprite("motor-ligado","/sprites/engine-effects.png",{sliceX:4,anims:{run:{from:0,to:3,loop:!0,speed:12}}}),j.focus(),_()})})}U();function _(){R.remove();const{configuracaoJogador:e}=I();e(),m(),q(g),o.onUpdate(()=>{o.get("inimigo").length===0&&(u++,o.play("proximo-nivel",{volume:.1}),S.innerText=u,m())}),X()}function G(){h.remove(),j.focus(),d=0,u=1,D.innerText=d,S.innerText=u,A();const{configuracaoJogador:e}=I();e(),m()}function X(){o.onCollide("inimigo","projetil",(e,i)=>{i.is("projetil-jogador")&&o.get("jogador").length!==0&&(o.play("acerto",{volume:.1}),y(e,"#9927ff"),e.destroy(),i.destroy(),d+=10,l=Math.max(l,d),localStorage.setItem("maiorPontuacao",l),D.innerText=d,E.innerText=l)}),o.onCollide("jogador","projetil",(e,i)=>{i.is("projetil-inimigo")&&o.get("jogador").length!==0&&(o.play("explosao",{volume:.1}),y(e,"#FFFFFF"),e.destroy(),i.destroy(),document.body.append(h))})}
//# sourceMappingURL=index-DVvtjyz3.js.map
