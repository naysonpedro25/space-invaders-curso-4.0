import{h as S}from"./kaplay-bxqp4ndF.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(t){if(t.ep)return;t.ep=!0;const c=n(t);fetch(t.href,c)}})();const L=600,F=20,M=950,T=70,v={CIMA:-1,BAIXO:1},f={FACIL:1,MEDIO:.6,DIFICIL:.3},b=15;function x(e,i){const n=o.add([o.rect(2,25),o.color("#FFFFFF"),o.anchor("center"),o.pos(e),o.area(),o.timer(),"projetil"]);return n.onUpdate(()=>{n.move(o.vec2(0,i*M)),(n.pos.x<0||n.pos.y>o.height())&&n.destroy()}),n}function I(){const e=o.add([o.sprite("nave",{width:90}),o.rotate(),o.pos(o.center().x,o.center().y+370),o.anchor("center"),o.timer(),o.area({shape:new o.Rect(o.vec2(0,0),50,55)}),"jogador"]);e.add([o.sprite("motor",{width:80}),o.pos(0,10),o.anchor("center")]).add([o.sprite("motor-ligado",{width:80,anim:"run"}),o.anchor("center"),o.pos(0,5)]);function n(){e.onKeyDown(r=>{r==="left"&&(e.angle=o.lerp(e.angle,-20,.1),e.pos.x>e.width/2&&e.move(o.vec2(-600,0))),r==="right"&&(e.angle=o.lerp(e.angle,F,.1),e.pos.x<o.width()-e.width/2&&e.move(o.vec2(L,0)))}),e.onKeyPress(r=>{r==="up"&&(o.play("projetil",{volume:.3}),x(o.vec2(e.pos.x,e.pos.y-e.height/2+5),v.CIMA).tag("projetil-jogador"))}),e.onUpdate(()=>{e.angle=o.lerp(e.angle,0,.09)})}return{jogador:e,configuracaoJogador:n}}function C(e){return o.add([o.sprite("inimigo",{width:40,anim:"run"}),o.anchor("center"),o.pos(e),o.timer(),o.area(),"inimigo"])}function m(){const e=Math.round(o.rand(8)+1),i=Math.round(o.rand(8)+1);for(let n=0;n<e;n++)for(let r=0;r<i;r++){const t=30+r*50,c=100+n*50;C(o.vec2(t,c))}}function A(){o.get("inimigo").forEach(e=>{e.exists()&&e.destroy()})}function P(e){let i=!0;o.onUpdate(()=>{const r=o.get("inimigo");if(r.length===0){A();return}let t=0,c=o.width();const a=r[0].width;r.forEach(s=>{s.exists()&&(c=Math.min(s.pos.x,c),t=Math.max(s.pos.x,t))}),c<a/2&&(i=!0),t>o.width()-a/2&&(i=!1),r.forEach(s=>{s.exists()&&(i?s.move(o.vec2(T,0)):s.move(o.vec2(-70,0)))})});async function n(){if(!(o.get("jogador").length>0))return;const t=o.get("inimigo").filter(O=>O.exists());if(t.length===0)return;const c=Math.floor(o.rand(0,t.length)),a=t[c];if(!a)return;x(o.vec2(a.pos.x,a.pos.y+a.height/2),v.BAIXO).tag("projetil-inimigo")}o.loop(e,()=>{n()})}function w(e,i){return o.add([o.circle(3),o.pos(e),o.move(o.vec2(Math.random()-.5,Math.random()-.5),100),o.opacity(1),o.animate(),o.color(i),"particula"])}function y(e,i){for(let n=0;n<b;n++){const r=w(e.pos,i);r.onUpdate(()=>{r.opacity-=.03,r.opacity<=0&&r.destroy()})}return o.get("particula")}const q=document.querySelectorAll(".botao-play"),J=document.querySelector(".botao-resetar"),N=document.querySelector(".tela-inicio"),j=document.querySelector("canvas"),u=document.querySelector(".dificuldade"),D=document.querySelector(".nivel");let d=1;const E=document.querySelector(".pontos"),R=document.querySelector(".maiorPontuacao");let l=0,p=0;const h=document.querySelector(".fim-jogo");h.remove();J.addEventListener("click",()=>{G()});let o,g=f.MEDIO;function U(){q.forEach(e=>{u.innerText="Médio",e.addEventListener("click",()=>{e.classList.contains("facil")&&(g=f.FACIL,u.innerText="Fácil"),e.classList.contains("dificil")&&(g=f.DIFICIL,u.innerText="Difícil"),o=S({background:"#121212",canvas:document.querySelector("canvas")}),o.loadRoot("./"),o.loadSound("projetil","../public/sounds/shoot.mp3"),o.loadSound("acerto","../public/sounds/hit.mp3"),o.loadSound("explosao","../public/sounds/explosion.mp3"),o.loadSound("proximo-nivel","../public/sounds/next_level.mp3"),o.loadSprite("nave","../public/sprites/spaceship.png"),o.loadSprite("motor","../public/sprites/engine.png"),o.loadSprite("inimigo","../public/sprites/invader-sprites.png",{sliceX:2,sliceY:0,anims:{run:{from:0,to:1,loop:!0,speed:5}}}),o.loadSprite("motor-ligado","../public/sprites/engine-effects.png",{sliceX:4,sliceY:0,anims:{run:{from:0,to:3,loop:!0,speed:12}}}),j.focus(),_()})})}U();function _(){N.remove();const{configuracaoJogador:e}=I();e(),m(),P(g),o.onUpdate(()=>{o.get("inimigo").length===0&&(d++,o.play("proximo-nivel",{volume:.1}),D.innerText=d,m())}),X()}function G(){h.remove(),j.focus(),l=0,d=1,E.innerText=l,D.innerText=d,A();const{configuracaoJogador:e}=I();e(),m()}function X(){o.onCollide("inimigo","projetil",(e,i)=>{i.is("projetil-jogador")&&o.get("jogador").length!==0&&(o.play("acerto",{volume:.1}),y(e,"#9927ff"),e.destroy(),i.destroy(),l+=10,p=Math.max(p,l),E.innerText=l,R.innerText=p)}),o.onCollide("jogador","projetil",(e,i)=>{i.is("projetil-inimigo")&&o.get("jogador").length!==0&&(o.play("explosao",{volume:.1}),y(e,"#FFFFFF"),e.destroy(),i.destroy(),document.body.append(h))})}
//# sourceMappingURL=index-Bo20gXZc.js.map
